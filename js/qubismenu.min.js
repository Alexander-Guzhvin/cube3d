function QubisMenu(n){function k(b,a){var e=c.MeshLambertMaterial,d=z.load(b);d.name=a;d.anisotropy=g.capabilities.getMaxAnisotropy();return new e({map:d})}function t(b){if(document.pointerLockElement)b={x:0,y:0,button:b.button};else{var a=b.changedTouches?b.changedTouches[0]:b,c=f.getBoundingClientRect();b={x:(a.clientX-c.left)/c.width*2-1,y:-(a.clientY-c.top)/c.height*2+1,button:b.button}}if(0===b.button||void 0===b.button){u.setFromCamera(b,d);b=u.intersectObjects(h.children,!0)[0]||!1;a=(new Date).getTime();
c=null;b&&(c=p.material[b.face.materialIndex].map.name);if(null!=c&&c==v&&500>a-w&&null!=q.onSelect)q.onSelect(c);w=a;v=c}}function x(a){a=d.position.clone();a.normalize();a.applyAxisAngle(new c.Vector3(0,1,0),Math.PI/180*-30);a.applyAxisAngle(new c.Vector3(1,0,0),Math.PI/180*-30);r.position.copy(a)}function y(b){if(void 0===b||n.offsetWidth!=l||n.offsetHeight!=m){b=n.offsetHeight;l=n.offsetWidth;m=b;g&&(d.aspect=l/m,d.updateProjectionMatrix(),g.setSize(l,m));b=new c.Box3;b.expandByObject(p);var e=
b.getSize(new c.Vector3);b=b.getCenter(new c.Vector3);e=Math.max(e.x,e.y,e.z)/(2*Math.atan(Math.PI*d.fov/360));e=Math.max(e,e/d.aspect);var f=a.target.clone().sub(d.position).normalize().multiplyScalar(e);a.minDistance=a.maxDistance=1.75*e;a.target.copy(b);d.near=e/100;d.far=100*e;d.updateProjectionMatrix();d.position.copy(a.target).sub(f)}a.update();g.render(h,d);requestAnimationFrame(y)}var c=THREE,q=this;q.onSelect=null;var l=1E3,m=1E3,g,f,d,h,r,p,a,u=new c.Raycaster,z=new c.TextureLoader,v=null,
w=0;(function(){g=new c.WebGLRenderer({alpha:!0,antialias:!0,preserveDrawingBuffer:!0});g.setSize(l,m);g.setClearColor(16777215,0);f=g.domElement;f.cssText="position:absolute;top:0;left:0;margin:0;padding:0;border:0;";d=new c.PerspectiveCamera(55,l/m,1,1500);d.position.set(0,-100,0);r=new c.DirectionalLight(13421772);var b=new c.BoxGeometry(50,50,50),e=[k("textures/3.png","auto"),k("textures/6.png","web"),k("textures/1.png",null),k("textures/2.png",null),k("textures/5.png","adv"),k("textures/4.png",
"3d")];p=new c.Mesh(b,e);h=new c.Scene;h.add(d);h.add(new c.AmbientLight(8947848));h.add(r);h.add(p);a=new c.OrbitControls(d,f);a.autoRotate=!0;a.autoRotateSpeed=.5;a.enablePan=!1;a.enableKeys=!1;a.enableZoom=!1;a.enableDamping=!0;a.dampingFactor=.2;a.maxDistance=100;a.minDistance=100;a.minAzimuthAngle=Math.PI/180*45;a.maxAzimuthAngle=Math.PI/180*45;a.minPolarAngle=Math.PI/180*60;a.maxPolarAngle=Math.PI/180*60;a.update();a.minAzimuthAngle=-Infinity;a.maxAzimuthAngle=Infinity;a.minPolarAngle=Math.PI/
180*30;a.maxPolarAngle=Math.PI/180*150;a.addEventListener("change",x);x(null);f.addEventListener("mousedown",t);f.addEventListener("touchstart",t);n.appendChild(f);y()})();return q};